import{t as f,c as o}from"./cart.DBsNrOLM.js";import{g as r}from"./productUtils.DlmheqsG.js";const g=r("12-rules-for-pro-coders-ebook"),c=r("12-rules-for-pro-coders-audio-upgrade"),I=r("12-rules-for-pro-coders-video-upgrade");document.addEventListener("DOMContentLoaded",()=>{f(c);const s=document.getElementById("accept-upgrade"),i=document.getElementById("cart-items"),p=document.getElementById("cart-total"),h=o.getItems().some(n=>n.id===c.id),E=o.getItems().some(n=>n.id===I.id);if(h){console.log("[REDIRECT] User already has the audiobook, redirecting to /video-upgrade..."),window.location.href="/12-rules/video-upgrade";return}if(E){console.log("[REDIRECT] User already has the video book, redirecting to /checkout..."),window.location.href="/checkout";return}function a(){const n=o.getItems();i.innerHTML="",n.forEach(e=>{const t=document.createElement("li");if(t.className="flex items-center gap-4",e.image){const d=document.createElement("img");d.src=typeof e.image=="string"?e.image:e.image.src,d.alt=e.name,d.className="h-16 w-auto object-contain rounded shadow",t.appendChild(d)}const u=document.createElement("span");u.textContent=`${e.name} - $${e.price.toFixed(2)}`,t.appendChild(u),i.appendChild(t)});const m=n.reduce((e,t)=>e+t.price*(t.quantity||1),0);p.textContent=m.toFixed(2);const l=document.getElementById("cart-checkout-total");l&&(l.textContent=m.toFixed(2))}s?.addEventListener("change",()=>{s.checked?(o.removeItem(g),o.addItem(c)):(o.removeItem(c),o.addItem(g)),a()}),a(),window.addEventListener("cartUpdated",a)});
