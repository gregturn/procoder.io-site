<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/favicon-180x180.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="192x192" href="/favicon-192x192.png"><link rel="sitemap" href="/sitemap-index.xml"><link rel="canonical" href="https://dev.procoder.io/checkout/"><meta name="generator" content="Astro v5.7.9"><title>Checkout | Pro Coder</title><!-- Google tag (gtag.js) @formatter:off --><script async src="https://www.googletagmanager.com/gtag/js?id=G-X8BZNP13K6"></script> <script>(function(){const measurementId = "G-X8BZNP13K6";

    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', measurementId);
})();</script> <!-- Google tag (gtag.js) @formatter:on --><meta name="description" content="Actionable Advice to Advance Your Career"><meta name="robots" content="index, follow"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet"><!-- Open Graph --><meta property="og:type" content="website"><meta property="og:url" content="https://dev.procoder.io/checkout/"><meta property="og:title" content="Checkout | Pro Coder"><meta property="og:description" content="Actionable Advice to Advance Your Career"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://dev.procoder.io/checkout/"><meta property="twitter:title" content="Checkout | Pro Coder"><meta property="twitter:description" content="Actionable Advice to Advance Your Career"><link rel="stylesheet" href="/_astro/_page_.CJLFBjA3.css"></head> <body data-theme="procoder">   <section class="py-16 bg-background-base min-h-screen"> <div class="site-container max-w-4xl mx-auto px-4"> <h1 class="text-3xl font-bold mb-10 text-center">Review Your Order</h1> <div id="cart-container" class="space-y-8"> <!-- Cart items will render here --> </div> <hr class="my-12 border-gray-300"> <h2 class="text-2xl font-semibold mb-4">Customer Information</h2> <form id="checkout-form" class="space-y-4"> <input required name="name" type="text" placeholder="Full Name" class="w-full p-3 border rounded"> <input required name="email" type="email" placeholder="Email Address" class="w-full p-3 border rounded"> <div class="text-right"> <button type="submit" class="shadow px-16 py-8 uppercase group relative inline-flex overflow-hidden items-center justify-center rounded-border-small font-medium transition-all duration-300 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 rounded-full flex items-center gap-2 bg-primary text-white hover:bg-primary-light focus-visible:ring-primary hover:ring-2 hover:ring-primary hover:ring-offset-2 h-10 px-4 py-2 text-small  shadow-xl shadow-color:003087 hover:shadow-xl" aria-disabled="false"> <span class="absolute left-0 -mt-12 h-32 w-1/2 translate-x-[250%] rotate-12 bg-white opacity-20 transition-all duration-250 ease-out group-hover:translate-x-[2%]"></span> Pay $<span id="total-amount">0.00</span> </button> </div> </form> </div> </section> <script type="module">
        import cart from '/src/scripts/cart.ts';

        const container = document.getElementById("cart-container");
        const totalEl = document.getElementById("total-amount");

        function renderCart() {
            const items = cart.getItems();
            container.innerHTML = items.length ? '' : '<p class="text-center">Your cart is empty.</p>';

            let total = 0;

            items.forEach(item => {
                const line = document.createElement('div');
                line.className = "flex flex-col md:flex-row justify-between items-center border p-4 rounded shadow gap-4";

                const image = item.image ? `<img src="${item.image.src}" alt="${item.name}" class="w-20 h-20 object-cover rounded" />` : '';

                line.innerHTML = `
                    <div class="flex items-center gap-4">
                        ${image}
                        <div>
                            <p class="font-semibold">${item.name}</p>
                            <p class="text-sm text-gray-600">Quantity: ${item.quantity}</p>
                            <p class="text-sm text-gray-800">Price: $${(item.price * item.quantity).toFixed(2)}</p>
                        </div>
                    </div>
                    <button class="text-red-500 hover:text-red-700" data-id="${item.id}">Remove</button>
                `;

                line.querySelector("button").addEventListener("click", () => {
                    cart.removeItem(item.id);
                    renderCart();
                });

                container.appendChild(line);
                total += item.price * item.quantity;
            });

            totalEl.textContent = total.toFixed(2);
        }

        document.getElementById("checkout-form").addEventListener("submit", async (e) => {
            e.preventDefault();

            const form = e.target;
            const name = form.name.value;
            const email = form.email.value;

            const payload = {
                customer: {name, email},
                cart: cart.getItems(),
                totalAmount: cart.getItems().reduce((sum, i) => sum + i.price * (i.quantity || 1), 0),
                currency: "usd",
                timestamp: new Date().toISOString(),
            };

            console.log("Submitting payment payload:", payload);

            const isLocal = location.hostname === "localhost";
            const endpoint = isLocal
                ? "http://localhost:8787"
                : "https://cart-checkout-worker.greg-l-turnquist.workers.dev"; // update if your prod domain differs

            const res = await fetch(endpoint, {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify(payload),
            });

            if (!res.ok) {
                const text = await res.text();
                console.error("Checkout failed:", res.status, text);
                alert("There was an error processing your payment.");
                return;
            }

            const json = await res.json();
            if (json && json.url) {
                window.location.href = json.url;
            } else {
                alert("There was an error processing your payment.");
            }
        });

        document.addEventListener("DOMContentLoaded", renderCart);
        window.addEventListener("cartUpdated", renderCart);
    </script>  <a href="/checkout" class="flex items-center gap-2 text-background px-4 py-2 transition fixed top-4 right-4 z-50" id="cart-button"> <div class="relative  text-secondary"> <svg xmlns="http://www.w3.org/2000/svg" stroke-width="2" width="28" height="28" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none" viewBox="0 0 24 24" class="lucide lucide-shopping-cart">  <circle cx="8" cy="21" r="1"></circle> <circle cx="19" cy="21" r="1"></circle> <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"></path>  </svg> <span id="cart-count" class="absolute top-[-5px] right-[-10px] bg-secondary text-background-dark text-xs rounded-full w-5 h-5 flex items-center justify-center">0</span> </div> <script type="module">class a{items=[];constructor(){if(typeof localStorage<"u"){const t=localStorage.getItem("cart");if(t)try{this.items=JSON.parse(t),console.log("[cart] Loaded items from localStorage:",this.items)}catch(e){console.warn("[cart] Failed to parse cart from localStorage",e)}}}save(){typeof localStorage<"u"&&(localStorage.setItem("cart",JSON.stringify(this.items)),console.log("[cart] Saved items to localStorage:",this.items))}addItem(t){console.log("[cart] Adding item:",t);const e=this.items.find(o=>o.id===t.id);if(e)e.quantity=(e.quantity||1)+1,console.log("[cart] Increased quantity:",e);else{const o={...t,quantity:1};this.items.push(o),console.log("[cart] Pushed new item:",o)}this.save(),this.dispatchUpdate()}removeItem(t){console.log("[cart] Removing item with ID:",t),this.items=this.items.filter(e=>e.id!==t),this.save(),this.dispatchUpdate()}clear(){this.items=[],this.save(),this.dispatchUpdate()}getTotalCount(){const t=this.items.reduce((e,o)=>e+(o.quantity||1),0);return console.log("[cart] Total count:",t),t}getItems(){return console.log("[cart] getItems called. Current items:",this.items),[...this.items]}hasItem(t){return this.items.some(e=>e.id===t)}dispatchUpdate(){window.dispatchEvent(new CustomEvent("cartUpdated"))}}const i=new a;document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("cart-count");function t(){const e=i.getTotalCount();console.log("[CartButton] Total count updated:",e),s.textContent=e.toString()}window.addEventListener("cartUpdated",t),t()});</script> </a>  <!--<ThemeSwitcher />--> <script type="module" src="/_astro/Layout.astro_astro_type_script_index_0_lang.DLBBgGU8.js"></script> </body> </html>