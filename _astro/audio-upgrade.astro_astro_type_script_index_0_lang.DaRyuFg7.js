import{c as o}from"./cart.Dwi38V3E.js";import{g as r}from"./productUtils.C_986jib.js";const g=r("12-rules-for-pro-coders-ebook"),a=r("12-rules-for-pro-coders-audio-upgrade"),f=r("12-rules-for-pro-coders-video-upgrade");document.addEventListener("DOMContentLoaded",()=>{const i=document.getElementById("accept-upgrade"),s=document.getElementById("cart-items"),p=document.getElementById("cart-total"),h=o.getItems().some(d=>d.id===a.id),E=o.getItems().some(d=>d.id===f.id);if(h){console.log("[REDIRECT] User already has the audiobook, redirecting to /video-upgrade..."),window.location.href="/12-rules/video-upgrade";return}if(E){console.log("[REDIRECT] User already has the video book, redirecting to /checkout..."),window.location.href="/checkout";return}function c(){const d=o.getItems();s.innerHTML="",d.forEach(e=>{const t=document.createElement("li");if(t.className="flex items-center gap-4",e.image){const n=document.createElement("img");n.src=typeof e.image=="string"?e.image:e.image.src,n.alt=e.name,n.className="h-16 w-auto object-contain rounded shadow",t.appendChild(n)}const u=document.createElement("span");u.textContent=`${e.name} - $${e.price.toFixed(2)}`,t.appendChild(u),s.appendChild(t)});const m=d.reduce((e,t)=>e+t.price*(t.quantity||1),0);p.textContent=m.toFixed(2);const l=document.getElementById("cart-checkout-total");l&&(l.textContent=m.toFixed(2))}i?.addEventListener("change",()=>{i.checked?(o.removeItem(g.id),o.addItem(a)):(o.removeItem(a.id),o.addItem(g)),c()}),c(),window.addEventListener("cartUpdated",c)});
